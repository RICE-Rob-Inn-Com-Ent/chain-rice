# ğŸŒ Use Node.js (Debian-based for better compatibility)
FROM node:18-slim

# ğŸ“ Set working directory
WORKDIR /app

# ğŸ”§ Enable corepack and set up correct Yarn version
RUN corepack enable && corepack prepare yarn@4.9.1 --activate

# ğŸ“¦ Copy package files and install dependencies with timeout settings
COPY package.json yarn.lock ./
RUN yarn install --frozen-lockfile

# ğŸ“¦ Copy the full frontend codebase
COPY . .

# ğŸšª Expose the Vite dev server port
EXPOSE 3000

# ğŸ§ª Set default env
ENV NODE_ENV=development

# ğŸš€ Start the Vite development server
CMD ["yarn", "dev", "--host", "0.0.0.0", "--port", "3001"]
